*PipeWork*
============

###*PipeWork* Component###

####REDUCER####

異なるデータ幅のパスを継ぐためのアダプタです.

REDUCER とは配管用語で径違い継ぎ手、つまり直径違う配管(パイプ)を接続
するために用いる管継手のことです.
論理回路の世界でも、ビット幅の異なるデータパスどうしを継ぐことが多い
のでこのような汎用のアダプタを作って REDUCER という名前をつけました.

詳細は [doc/ja/reducer.md](doc/ja/reducer.md) を参照.


####CHOPPER####

先頭アドレスとサイズで示されたブロックを、指定された大きさのピースに分割する回路です.

  * 例1)ブロックの先頭アドレス=2、ブロックのサイズ=11、ピースのサイズ=4の場合
    2、4、4、1のサイズのピースに分割します.
  * 例2)ブロックの先頭アドレス=0x0048、ブロックのサイズ=0x400、ピースのサイズ=0x100の場合
    0x0B8、0x100、0x100、0x100、0x048のサイズのピースにに分割します.
  * ついでにピース有効信号(１ピースのうちどの部分が有効かを示す信号)も出力します.
    例えば、ADDR=0x0002、SIZE=11、１ピースのサイズ=4の場合、
    "1100"、"1111"、"1111"、"0001" を生成します.

####QUEUE ARBITER####

キュー(ファーストインファーストアウト)方式の調停回路です.

リクエストを到着順に許可することを特徴とします.

キュー方式が他の一般的な固定優先順位方式やラウンドロビン方式に比べて有利な点は次の二つ.

  * 必ずリクエストはいつかは許可されることが保証されています.
    固定優先順位方式の場合、場合によっては永久にリクエストが許可されることがないことが起り得ますが、
    キュー方式はそれがありません.
  * リクエストされた順番が変わることがありません.
    用途によっては順番が変わることで誤動作する場合がありますが、
    キュー方式ではそれに対応できます.

キュー方式が他の一般的な固定優先順位方式やラウンドロビン方式に比べて不利な点は次の二つ.

  * リクエストが到着した順番を記録しているため、回路規模は他の方式に比べて大きい傾向があります.
    特にリクエストの数が増えると二乗のオーダーで回路規模が大きくなります.
  * １クロックで多数の処理を行わなければならないので動作周波数が他の方式に比べて遅い傾向があります.
    特にリクエストの数が増えると比例して遅延時間が増大します.

詳細は doc/ja/queue_arbiter.md を参照.

####SYNCRONIZER####

異なるクロックで動作するパスを継ぐアダプタのクロック同期化回路です.

入力側のクロックに同期化された入力データを出力側クロックに同期化して出力します.

入力側のクロックと出力側のクロックとの関係は、ジェネリック変数(I_CLK_RAGE,O_CLK_RATE)で指示します.

  * I_CLK_RATE = 0 かつ O_CLK_RATE = 0 の場合は I_CLK とO_CLK は非同期.  

  * I_CLK_RATE = 1 かつ O_CLK_RATE = 1 の場合は I_CLK とO_CLK は完全に同期している.  

  * I_CLK_RATE > 1 かつ O_CLK_RATE = 1 の場合は I_CLK はO_CLK のI_CLK_RATE倍の周波数.
    ただし I_CLK の立上りは O_CLK の立上りと一致している.

  * I_CLK_RATE = 1 かつ O_CLK_RATE > 1 の場合は O_CLK はI_CLK の O_CLK_RATE倍の周波数.
    ただし I_CLK の立上りは O_CLK の立上りと一致している.

  * 例1)I_CLK_RATE=1 & O_CLK_RATE=1          

        I_CLK _|~|_|~|_|~|_|~|_|~|_|~|_|~|_  

        O_CLK _|~|_|~|_|~|_|~|_|~|_|~|_|~|_  

  * 例2)I_CLK_RATE=2 & O_CLK_RATE=1          

        I_CLK _|~|_|~|_|~|_|~|_|~|_|~|_|~|_  

        O_CLK _|~~~|___|~~~|___|~~~|___|~~~  

        I_CKE ~~~|___|~~~|___|~~~|___|~~~|_  

  * 例3)I_CLK_RATE=3 & O_CLK_RATE=1          

        I_CLK _|~|_|~|_|~|_|~|_|~|_|~|_|~|_  

        O_CLK _|~~~~~|_____|~~~~~|_____|~~~  

        I_CKE ~~~|_______|~~~|_______|~~~|_  

  * 例4)I_CLK_RATE=1 & O_CLK_RATE=2          

        I_CLK _|~~~|___|~~~|___|~~~|___|~~~  

        O_CLK _|~|_|~|_|~|_|~|_|~|_|~|_|~|_  

        O_CKE ~~~|___|~~~|___|~~~|___|~~~|_  

####QUEUE REGISTER####

フリップフロップベースの比較的浅いキュー.


####DELAY REGISTER####

入力データを指定したクロックだけ遅延して出力する回路です.
遅延するクロック数はジェネリック変数および信号によって設定することが出来ます.


####DELAY ADJUSTER####

入力データを DELAY REGISTER の出力に合わせて調整して出力する回路です.


###ライセンス###
二条項BSDライセンス (2-clause BSD license) で公開しています。
